<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Integration with Great Expectations &mdash; pandas-profiling 3.1.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/autodoc_pydantic.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Integrations" href="integrations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #174C4F" >
            <a href="../index.html" class="icon icon-home"> pandas-profiling
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Pandas Profiling</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="announcements.html">Announcements</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="big_data.html">Big Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensitive_data.html">Sensitive data</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Integration with Great Expectations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#about-great-expectations">About Great Expectations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-expectation-suites-with-pandas-profiling">Creating Expectation Suites with Pandas Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#included-expectation-types">Included Expectation types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rolling-your-own-expectation-generation-logic">Rolling your own Expectation Generation Logic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support and contribution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution_guidelines.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>


    <div style="padding-top: 20px">
        <a href="https://github.com/sponsors/sbrugman">
            <summary id="sponsor-button-repo" class="btn btn-sm" title="Sponsor pandas-profiling/pandas-profiling" data-ga-click="Repository, show sponsor modal, action:files#disambiguate; text:Sponsor" role="button">
              <svg class="octicon octicon-heart text-pink v-align-text-bottom" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg>
              Sponsor
            </summary>
        </a>
    </div>




















        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #174C4F" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pandas-profiling</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Integration with Great Expectations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/great_expectations_integration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="integration-with-great-expectations">
<h1>Integration with Great Expectations<a class="headerlink" href="#integration-with-great-expectations" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://www.greatexpectations.io">Great Expectations</a> is a Python-based open-source library for validating, documenting, and profiling your data. It helps you to maintain data quality and improve communication about data between teams. With Great Expectations, you can assert what you expect from the data you load and transform, and catch data issues quickly – Expectations are basically <em>unit tests for your data</em>. Pandas Profiling features a method to create a suite of Expectations based on the results of your ProfileReport!</p>
<section id="about-great-expectations">
<h2>About Great Expectations<a class="headerlink" href="#about-great-expectations" title="Permalink to this headline"></a></h2>
<p><em>Expectations</em> are assertions about your data. In Great Expectations, those assertions are expressed in a declarative language in the form of simple, human-readable Python methods. For example, in  order to assert that you want values in a column <code class="docutils literal notranslate"><span class="pre">passenger_count</span></code> in your dataset to be integers between 1 and 6, you can say:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_between(column=&quot;passenger_count&quot;,</span> <span class="pre">min_value=1,</span> <span class="pre">max_value=6)</span></code></p>
</div></blockquote>
<p>Great Expectations then uses this statement to validate whether the column <code class="docutils literal notranslate"><span class="pre">passenger_count</span></code> in a given table is indeed between 1 and 6, and returns a success or failure result. The library currently provides <a class="reference external" href="https://docs.greatexpectations.io/en/latest/reference/glossary_of_expectations.html">several dozen highly expressive built-in Expectations</a>, and allows you to write custom Expectations.</p>
<p>Great Expectations renders Expectations to clean, human-readable documentation called <em>Data Docs</em>. These HTML docs contain both your Expectation Suites as well as your data validation results each time validation is run – think of it as a continuously updated data quality report.</p>
<p>For more information about Great Expectations, check out the <a class="reference external" href="https://docs.greatexpectations.io/en/latest/">Great Expectations documentation</a> and join the <a class="reference external" href="https://www.greatexpectations.io/slack">Great Expectations Slack channel</a> for help.</p>
</section>
<section id="creating-expectation-suites-with-pandas-profiling">
<h2>Creating Expectation Suites with Pandas Profiling<a class="headerlink" href="#creating-expectation-suites-with-pandas-profiling" title="Permalink to this headline"></a></h2>
<p>An <em>Expectation Suite</em> is simply a set of Expectations. You can create Expectation Suites by writing out individual statements, such as the one above, or by automatically generating them based on profiler results.</p>
<p>Pandas Profiling provides a simple <code class="docutils literal notranslate"><span class="pre">to_expectation_suite()</span></code> method that returns a Great Expectations <code class="docutils literal notranslate"><span class="pre">ExpectationSuite</span></code> object which contains a set of Expectations.</p>
<p><strong>Pre-requisites</strong>: In order to run the <code class="docutils literal notranslate"><span class="pre">to_expectation_suite()</span></code> method, you will need to install Great Expectations:
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">great_expectations</span></code></p>
<p>If you would like to use the additional features such as saving the Suite and building Data Docs, you will also need to configure a Great Expectations Data Context by running <code class="docutils literal notranslate"><span class="pre">great_expectations</span> <span class="pre">init</span></code> while in your project directory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas_profiling</span> <span class="kn">import</span> <span class="n">ProfileReport</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;titanic.csv&quot;</span><span class="p">)</span>

<span class="n">profile</span> <span class="o">=</span> <span class="n">ProfileReport</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Pandas Profiling Report&quot;</span><span class="p">,</span> <span class="n">explorative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Obtain an Expectation Suite with a set of default Expectations</span>
<span class="c1"># By default, this also profiles the dataset, saves the suite, runs validation, and builds Data Docs</span>
<span class="n">suite</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">to_expectation_suite</span><span class="p">()</span>
</pre></div>
</div>
<p>This assumes that the <code class="docutils literal notranslate"><span class="pre">great_expectations</span></code> Data Context directory is in the <em>same path</em> where you run the script. In order to specify the location of your Data Context, pass it in as an argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">great_expectations</span> <span class="k">as</span> <span class="nn">ge</span>

<span class="n">data_context</span> <span class="o">=</span> <span class="n">ge</span><span class="o">.</span><span class="n">data_context</span><span class="o">.</span><span class="n">DataContext</span><span class="p">(</span>
    <span class="n">context_root_dir</span><span class="o">=</span><span class="s2">&quot;/Users/panda/code/my_ge_project/&quot;</span>
<span class="p">)</span>
<span class="n">suite</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">to_expectation_suite</span><span class="p">(</span><span class="n">data_context</span><span class="o">=</span><span class="n">data_context</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also configure each feature individually in the function call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">suite</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">to_expectation_suite</span><span class="p">(</span>
    <span class="n">suite_name</span><span class="o">=</span><span class="s2">&quot;titanic_expectations&quot;</span><span class="p">,</span>
    <span class="n">data_context</span><span class="o">=</span><span class="n">data_context</span><span class="p">,</span>
    <span class="n">save_suite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">run_validation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">build_data_docs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://pandas-profiling.ydata.ai/examples/master/features/great_expectations_example.html">the Great Expectations Examples</a> for complete examples.</p>
</section>
<section id="included-expectation-types">
<h2>Included Expectation types<a class="headerlink" href="#included-expectation-types" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">to_expectation_suite</span></code> method returns a default set of Expectations if Pandas Profiling determines that the assertion holds true for the profiled dataset.
The Expectation types depend on the datatype of a column:</p>
<p><strong>All columns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_not_be_null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_unique</span></code></p></li>
</ul>
<p><strong>Numeric columns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_in_type_list</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_increasing</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_decreasing</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_between</span></code></p></li>
</ul>
<p><strong>Categorical columns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_in_set</span></code></p></li>
</ul>
<p><strong>Datetime columns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expect_column_values_to_be_between</span></code></p></li>
</ul>
<p><strong>Filename columns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expect_file_to_exist</span></code></p></li>
</ul>
<p>The default logic is straight forward and can be found here in <a class="reference external" href="https://github.com/pandas-profiling/pandas-profiling/blob/master/src/pandas_profiling/model/expectation_algorithms.py">expectation_algorithms.py</a>.</p>
</section>
<section id="rolling-your-own-expectation-generation-logic">
<h2>Rolling your own Expectation Generation Logic<a class="headerlink" href="#rolling-your-own-expectation-generation-logic" title="Permalink to this headline"></a></h2>
<p>If you would like to profile datasets at scale, your use case might require changing the default expectations logic.
The <code class="docutils literal notranslate"><span class="pre">to_expectation_suite</span></code> takes the <code class="docutils literal notranslate"><span class="pre">handler</span></code> parameter, which allows you to take full control of the generation process.
Generating expectations takes place in two steps:</p>
<ul class="simple">
<li><p>mapping the detected type of each column to a generator function (that receives the columns’ summary statistics);</p></li>
<li><p>generating expectations based on the summary (e.g. <code class="docutils literal notranslate"><span class="pre">expect_column_values_to_not_be_null</span></code> if <code class="docutils literal notranslate"><span class="pre">summary[&quot;n_missing&quot;]</span> <span class="pre">==</span> <span class="pre">0</span></code>)</p></li>
</ul>
<p>Adding an expectation to columns with constant length can be achieved for instance using this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fixed_length</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">batch</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a length expectation to columns with constant length values&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;min_length&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;max_length&quot;</span><span class="p">]:</span>
        <span class="n">batch</span><span class="o">.</span><span class="n">expect_column_value_lengths_to_equal</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;min_length&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">batch</span>


<span class="k">class</span> <span class="nc">MyExpectationHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeset</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">Unsupported</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">generic_expectations</span><span class="p">],</span>
            <span class="n">Categorical</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">categorical_expectations</span><span class="p">,</span>
                <span class="n">fixed_length</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">Boolean</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">categorical_expectations</span><span class="p">],</span>
            <span class="n">Numeric</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">numeric_expectations</span><span class="p">],</span>
            <span class="n">URL</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">url_expectations</span><span class="p">],</span>
            <span class="n">File</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">file_expectations</span><span class="p">],</span>
            <span class="n">Path</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">path_expectations</span><span class="p">],</span>
            <span class="n">DateTime</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">datetime_expectations</span><span class="p">],</span>
            <span class="n">Image</span><span class="p">:</span> <span class="p">[</span><span class="n">expectation_algorithms</span><span class="o">.</span><span class="n">image_expectations</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">mapping</span><span class="p">,</span> <span class="n">typeset</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="c1"># (initiate report)</span>

<span class="n">suite</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">to_expectation_suite</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">MyExpectationHandler</span><span class="p">(</span><span class="n">report</span><span class="o">.</span><span class="n">typeset</span><span class="p">))</span>
</pre></div>
</div>
<p>You can automate even more by extending the typeset (by default the <code class="docutils literal notranslate"><span class="pre">ProfilingTypeSet</span></code>) with semantic data types specific to your company or use case (for instance disease classification in healthcare or currency and IBAN in finance).
For that, you can find details in the <a class="reference external" href="https://github.com/dylan-profiler/visions">visions</a> documentation.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="integrations.html" class="btn btn-neutral float-left" title="Integrations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Simon Brugman.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>